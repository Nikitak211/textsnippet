function map(data, mapper) {
    if (Object.prototype.toString(data) === '[object Array]') {
        return data.map(mapper);
    }

    var arr = [];
    for (var key in data) {
        if (data.hasOwnProperty(key)) {
            arr.push(mapper(data[key], key));
        }
    }
    return arr;
}

function transformer(transformers) {
    return function (data) {
        for (var field in data) {
            if (data.hasOwnProperty(field) && transformers.hasOwnProperty(field)) {
                data[field] = transformers[field](data[field], data);
            }
        }
        return data;
    }
}

module.exports = {
    map: map,
    transformer: transformer,
};
